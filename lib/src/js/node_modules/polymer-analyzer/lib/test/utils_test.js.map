{"version":3,"sources":["test/utils_test.ts"],"names":[],"mappings":"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","file":"utils_test.js","sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\n/// <reference path=\"../../node_modules/@types/mocha/index.d.ts\" />\n\nimport {assert, use} from 'chai';\nimport {Deferred, parseUrl} from '../utils';\n\nimport chaiAsPromised = require('chai-as-promised');\nuse(chaiAsPromised);\n\nsuite('parseUrl', () => {\n\n  function testUrl(url: string, properties: {[s: string]: any}) {\n    const urlObject = parseUrl(url);\n    for (const key in properties) {\n      if (!properties.hasOwnProperty(key)) {\n        continue;\n      }\n      assert.equal(urlObject[key], properties[key], `${url} property ${key}`);\n    }\n  }\n\n  test('parses urls that are absolute paths', () => {\n    testUrl(\n        '/abs/path', {protocol: null, hostname: null, pathname: '/abs/path'});\n    testUrl('/abs/path?query=string#hash', {\n      protocol: null,\n      hostname: null,\n      pathname: '/abs/path',\n      hash: '#hash',\n      search: '?query=string',\n    });\n  });\n\n  test('parses urls without protocol', () => {\n    testUrl('//host/path', {\n      protocol: undefined,\n      hostname: 'host',\n      pathname: '/path',\n    });\n    testUrl('//host', {\n      protocol: undefined,\n      hostname: 'host',\n      pathname: null,\n    });\n  });\n\n  test('parses urls that have protocols', () => {\n    testUrl('https://host/path', {\n      protocol: 'https:',\n      hostname: 'host',\n      pathname: '/path',\n    });\n  });\n});\n\nsuite('Deferred', () => {\n\n  test('resolves', async() => {\n    const deferred = new Deferred<string>();\n    const done = assert.becomes(deferred.promise, 'foo');\n    deferred.resolve('foo');\n    await done;\n  });\n\n  test('rejects', async() => {\n    const deferred = new Deferred<string>();\n    const done = assert.isRejected(deferred.promise, 'foo');\n    deferred.reject(new Error('foo'));\n    await done;\n  });\n\n  test('resolves only once', async() => {\n    const deferred = new Deferred<string>();\n    deferred.resolve('foo');\n    try {\n      deferred.resolve('bar');\n      assert.fail();\n    } catch (e) {\n      // pass\n    }\n    try {\n      deferred.reject(new Error('bar'));\n      assert.fail();\n    } catch (e) {\n      // pass\n    }\n  });\n\n  test('rejects', async() => {\n    const deferred = new Deferred<string>();\n    deferred.reject(new Error('foo'));\n    deferred.promise.catch((_) => {});\n    try {\n      deferred.resolve('bar');\n      assert.fail();\n    } catch (e) {\n      // pass\n    }\n    try {\n      deferred.reject(new Error('bar'));\n      assert.fail();\n    } catch (e) {\n      // pass\n    }\n  });\n\n});\n"]}