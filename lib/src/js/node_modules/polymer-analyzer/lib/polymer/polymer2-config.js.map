{"version":3,"sources":["polymer/polymer2-config.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;GAYG;;;AAIH,uDAA0D;AAI1D,6DAAuD;AACvD,+BAA+B;AAC/B,yCAA2C;AAG3C,8BACI,IAAoD,EACpD,IAAY;IACd,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CACpC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,kBAAkB,IAAI,CAAC,CAAC,MAAM,KAAK,IAAI;QACrD,CAAC,CAAC,IAAI,KAAK,KAAK,IAAI,6BAAiB,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,CAAC;IAC/D,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM,KAAK,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;IACxD,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACZ,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IAED,qEAAqE;IACrE,MAAM,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;IACrC,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;QACjC,kCAAkC;QAClC,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IACD,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,iBAAiB,CAAC,CAAC,CAAC;QAClD,qCAAqC;QACrC,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IAED,MAAM,eAAe,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,CAA2B,CAAC;IACrE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC;AAClC,CAAC;AAED,oBAA2B,IACsB;IAC/C,MAAM,WAAW,GAAG,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACrD,EAAE,CAAC,CAAC,CAAC,WAAW,IAAI,WAAW,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC;QACnD,2BAA2B;QAC3B,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IACD,EAAE,CAAC,CAAC,OAAO,WAAW,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;QAC1C,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IACD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;AAC3B,CAAC;AAXD,gCAWC;AAED;;GAEG;AACH,uBACI,IAAoD,EACpD,QAA4B;IAC9B,MAAM,cAAc,GAAG,oBAAoB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IAChE,MAAM,CAAC,cAAc,GAAG,sCAAiB,CAAC,cAAc,EAAE,QAAQ,CAAC,GAAG,EAAE,CAAC;AAC3E,CAAC;AALD,sCAKC;AAED,oBACI,IAAoD,EACpD,QAA4B;IAC9B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI;SAChB,MAAM,CACH,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,kBAAkB,IAAI,CAAC,CAAC,MAAM,KAAK,KAAK;QACtD,CAAC,CAAC,IAAI,KAAK,QAAQ,CAAC;SAC3B,GAAG,CAAC,CAAC,CAAC;QACL,MAAM,CAAC,IAAI,CAAC,QAAQ,CAChB,0BAAe,CAAC,CAAC,EAAE,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC,CAAC;AACT,CAAC;AAXD,gCAWC","file":"polymer2-config.js","sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport * as estree from 'estree';\n\nimport {getIdentifierName} from '../javascript/ast-value';\nimport {JavaScriptDocument} from '../javascript/javascript-document';\nimport {ScannedMethod} from '../model/model';\n\nimport {analyzeProperties} from './analyze-properties';\nimport * as docs from './docs';\nimport {toScannedMethod} from './js-utils';\nimport {ScannedPolymerProperty} from './polymer-element';\n\nfunction getStaticGetterValue(\n    node: estree.ClassDeclaration|estree.ClassExpression,\n    name: string): estree.Expression|undefined {\n  const candidates = node.body.body.filter(\n      (n) => n.type === 'MethodDefinition' && n.static === true &&\n          n.kind === 'get' && getIdentifierName(n.key) === name);\n  const getter = candidates.length === 1 && candidates[0];\n  if (!getter) {\n    return undefined;\n  }\n\n  // TODO(justinfagnani): consider generating warnings for these checks\n  const getterBody = getter.value.body;\n  if (getterBody.body.length !== 1) {\n    // not a single statement function\n    return undefined;\n  }\n  if (getterBody.body[0].type !== 'ReturnStatement') {\n    // we only support a return statement\n    return undefined;\n  }\n\n  const returnStatement = getterBody.body[0] as estree.ReturnStatement;\n  return returnStatement.argument;\n}\n\nexport function getIsValue(node: estree.ClassDeclaration|\n                           estree.ClassExpression): string|undefined {\n  const getterValue = getStaticGetterValue(node, 'is');\n  if (!getterValue || getterValue.type !== 'Literal') {\n    // we only support literals\n    return undefined;\n  }\n  if (typeof getterValue.value !== 'string') {\n    return undefined;\n  }\n  return getterValue.value;\n}\n\n/**\n * Returns the properties defined in a Polymer config object literal.\n */\nexport function getProperties(\n    node: estree.ClassDeclaration|estree.ClassExpression,\n    document: JavaScriptDocument): ScannedPolymerProperty[] {\n  const propertiesNode = getStaticGetterValue(node, 'properties');\n  return propertiesNode ? analyzeProperties(propertiesNode, document) : [];\n}\n\nexport function getMethods(\n    node: estree.ClassDeclaration|estree.ClassExpression,\n    document: JavaScriptDocument): ScannedMethod[] {\n  return node.body.body\n      .filter(\n          (n) => n.type === 'MethodDefinition' && n.static === false &&\n              n.kind === 'method')\n      .map((m) => {\n        return docs.annotate(\n            toScannedMethod(m, document.sourceRangeForNode(m)!));\n      });\n}"]}